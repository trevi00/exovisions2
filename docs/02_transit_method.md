# 2. 트랜짓 방법 이해하기

## 🌑 트랜짓(Transit)이란?

**트랜짓**은 행성이 별 앞을 지나가는 현상을 말합니다.

### 일상생활의 예시

```
[당신] 👀 ← [작은 새] 🐦 ← [태양] ☀️

새가 태양 앞을 지나가면 → 태양빛이 잠깐 가려집니다!
```

외계행성도 똑같습니다:

```
[지구 망원경] 🔭 ← [행성] 🪐 ← [별] ⭐

행성이 별 앞을 지나가면 → 별빛이 잠깐 감소합니다!
```

## 📉 광도 곡선 (Light Curve)

### 광도 곡선이란?

**광도 곡선**은 시간에 따른 별의 밝기 변화를 그래프로 나타낸 것입니다.

```
밝기
 ↑
100% │  ●━━━━━━━━●━━━━━━━━●━━━━━━━━●
     │            ╲        ╱
 99% │             ╲______╱
     │              트랜짓!
     └─────────────────────────────────→ 시간
```

### 실제 광도 곡선의 모습

```python
# 이상적인 경우 (노이즈 없음)
밝기
 ↑
1.00 │  ━━━━━━┓         ┏━━━━━━
0.99 │        ┗━━━━━━━━━┛
     └──────────────────────────→ 시간

# 실제 경우 (노이즈 있음)
밝기
 ↑
1.00 │  •·•·•·┓   •  • ┏•·•·•·
0.99 │    •   ┗••·••··•┛  •
     └──────────────────────────→ 시간
         실제는 흔들림이 많음!
```

## 🎯 트랜짓에서 알 수 있는 것들

### 1. 행성의 크기

```
밝기 감소량 = (행성 단면적 / 별 단면적) × 100%

예시:
- 목성 크기 행성 → 약 1% 감소
- 지구 크기 행성 → 약 0.01% 감소 (100분의 1!)
```

**결론**: 밝기가 많이 감소할수록 행성이 큽니다.

### 2. 궤도 주기 (Period)

```
첫 번째 트랜짓        두 번째 트랜짓        세 번째 트랜짓
     ↓                    ↓                    ↓
     ╲╱                   ╲╱                   ╲╱
━━━━━╱╲━━━━━━━━━━━━━━━━━╱╲━━━━━━━━━━━━━━━━━╱╲━━━━
     ←───── 주기 ──────→

트랜짓 사이의 시간 = 행성의 궤도 주기
```

### 3. 트랜짓 지속 시간

```
     ┌─ 시작
     ↓
━━━━━┓_________┏━━━━━
     └─────────┘
     ↑         ↑
     지속 시간  끝

지속 시간이 길수록 → 별에서 먼 궤도 or 큰 별
```

## 📊 트랜짓의 특징들

### Phase-Folded Light Curve (위상 접기 광도 곡선)

여러 번의 트랜짓을 겹쳐서 신호를 강화합니다:

```
원래 데이터:
╲╱        ╲╱        ╲╱        ╲╱
━╱╲━━━━━━━╱╲━━━━━━━╱╲━━━━━━━╱╲━━  (약한 신호)

모두 겹침:
    ╲╲╲╲╱╱╱╱
━━━━━╲╲╱╱━━━━━  (강한 신호!)

이렇게 하면 약한 신호도 찾을 수 있습니다!
```

### 트랜짓의 모양

```
1. Box 모양 (상자)
━━━━┓_____┏━━━━
    └─────┘
v = 0 (완전 상자형)

2. V 모양
━━━━╲     ╱━━━━
    ╲___╱
v = 1 (완전 V형)

3. U 모양 (일반적)
━━━━╲___╱━━━━
v = 0.5 (중간형)

※ v는 "트랜짓 모양 파라미터"
```

## 🔍 트랜짓 탐지의 조건

### 1. 궤도가 정렬되어야 함

```
✅ 가능한 경우 (지구에서 옆으로 보임):
    [지구] 👁️ ← [행성] 🪐 ← [별] ⭐

❌ 불가능한 경우 (위에서 보임):
         [행성]
            🪐
            ↓
    [지구] 👁️      [별] ⭐

궤도가 지구 방향으로 정렬되지 않으면 트랜짓 관측 불가!
```

### 2. 충분히 큰 행성

```
지구 크기 행성:   0.01% 감소  → 관측 매우 어려움 😓
목성 크기 행성:   1% 감소     → 관측 가능 😊
```

### 3. 여러 번 관측

```
1번 트랜짓: 우연일 수 있음 🤔
2번 트랜짓: 패턴 확인 🧐
3번 이상:   행성 확실! ✅
```

## 🎨 실제 광도 곡선 분석

### 좋은 행성 후보

```python
# 특징들:
1. 명확한 밝기 감소  ✓
   ━━━━┓_____┏━━━━
       └─────┘

2. 규칙적인 간격     ✓
   ╲╱    ╲╱    ╲╱
   ━╱╲━━━╱╲━━━╱╲━━

3. 대칭적인 모양     ✓
   ━━╲___╱━━
```

### 오탐 (False Positive) 사례

#### 1. 식쌍성 (Eclipsing Binary)

```
두 별이 서로 가림:
  큰별    작은별
   ⭐  ←→  ⭐

광도 곡선:
━━┓___┏━━━━┓_┏━━  (두 가지 깊이!)
  └───┘    └─┘
  주 식     부 식
```

#### 2. 별의 흑점 (Starspots)

```
별 표면의 어두운 점:
  ⭐ (●)  ← 흑점

광도 곡선:
━━•·•·•·•·•·•━━  (불규칙!)
```

#### 3. 기기 노이즈

```
망원경 문제:
━━━━━|━━━━━  (갑작스러운 변화)
      ↑
   망원경이 움직임
```

## 📐 주요 파라미터들

트랜짓 분석에서 측정하는 값들:

| 파라미터 | 기호 | 의미 | 단위 |
|---------|------|------|------|
| 주기 | P | 궤도를 한 바퀴 도는 시간 | 일(days) |
| 지속시간 | q | 트랜짓이 지속되는 시간 | 위상(phase) |
| 밝기 감소 | δ | 최대 밝기 감소량 | % |
| 모양 | v | 0=상자형, 1=V형 | 0~1 |
| S/N | - | 신호 대 잡음 비율 | 숫자 |

### 실제 예시

```python
# Pan-Planets 관측 결과 (논문의 Figure 1)
Period:        2.4567 days        # 궤도 주기
Duration:      0.0234 phase       # 트랜짓 시간
V-shape:       0.3               # U자 모양
Light drop:    0.9%              # 밝기 감소
S/N:          45.3               # 신호 강도
Transits:      87/1234           # 87번 트랜짓/총 1234 데이터
```

## 🔧 BLS (Box Least Squares) 방법

기존에 가장 많이 사용하는 자동 탐지 방법입니다.

### BLS의 원리

```
1. 다양한 주기를 시도
   P = 0.5일, 1일, 1.5일, 2일, ...

2. 각 주기마다 상자 모양을 맞춤
   ━━━━┓___┏━━━━
       └───┘

3. 가장 잘 맞는 주기 선택
   ✓ 가장 깊은 밝기 감소
   ✓ 가장 규칙적인 패턴
```

### BLS의 한계

1. **낮은 S/N에 약함**
   - 노이즈가 많으면 찾기 어려움

2. **단순한 모양만 인식**
   - 상자 모양이 아니면 놓칠 수 있음

3. **오탐이 많음**
   - 우주선(cosmic ray) 충돌
   - 별의 변동성
   - 랜덤 노이즈 패턴

4. **느림**
   - 모든 주기를 다 시도해야 함
   - 큰 데이터는 며칠 소요

**→ 이것이 머신러닝이 필요한 이유입니다!**

## 💡 실습 예제

### Python으로 간단한 트랜짓 시뮬레이션

```python
import numpy as np
import matplotlib.pyplot as plt

# 시간 배열 생성
time = np.linspace(0, 10, 1000)  # 10일간, 1000개 데이터

# 기본 밝기 (1.0 = 100%)
flux = np.ones_like(time)

# 트랜짓 추가
period = 2.0  # 2일 주기
duration = 0.1  # 0.1일 지속
depth = 0.01  # 1% 감소

for i in range(int(10 / period)):
    # 각 트랜짓의 시작 시간
    transit_start = i * period
    transit_end = transit_start + duration

    # 해당 시간의 밝기 감소
    mask = (time >= transit_start) & (time < transit_end)
    flux[mask] = 1.0 - depth

# 노이즈 추가
noise = np.random.normal(0, 0.001, len(time))
flux_noisy = flux + noise

# 그래프 그리기
plt.figure(figsize=(12, 4))
plt.plot(time, flux_noisy, 'k.', markersize=2, label='Noisy data')
plt.plot(time, flux, 'r-', linewidth=2, label='True signal')
plt.xlabel('Time (days)')
plt.ylabel('Relative Flux')
plt.title('Simulated Transit Light Curve')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()
```

## 📝 요약

- **트랜짓**: 행성이 별 앞을 지나가는 현상
- **광도 곡선**: 시간에 따른 밝기 변화 그래프
- **측정 가능**: 행성 크기, 궤도 주기, 트랜짓 시간
- **조건**: 궤도 정렬, 충분한 크기, 여러 번 관측
- **BLS**: 기존 자동 탐지 방법 (한계 있음)
- **오탐 주의**: 식쌍성, 흑점, 기기 노이즈

## 🤔 퀴즈로 확인하기

1. 트랜짓이란 무엇인가요?
   <details>
   <summary>답 보기</summary>
   행성이 별 앞을 지나가면서 별빛을 잠깐 가리는 현상
   </details>

2. 광도 곡선에서 무엇을 알 수 있나요?
   <details>
   <summary>답 보기</summary>
   행성의 크기, 궤도 주기, 트랜짓 지속 시간 등
   </details>

3. BLS 방법의 주요 한계는?
   <details>
   <summary>답 보기</summary>
   낮은 S/N에 약하고, 오탐이 많으며, 처리 속도가 느림
   </details>

4. 밝기가 1% 감소하면 행성 크기는?
   <details>
   <summary>답 보기</summary>
   대략 목성 크기 (지구는 0.01% 감소)
   </details>

## 🚀 다음 단계

이제 트랜짓 방법의 원리를 이해했습니다!

다음은 **머신러닝 기초**에 대해 알아보겠습니다.

👉 **[다음: 머신러닝 기초](03_machine_learning_basics.md)**

---

**도움이 필요하신가요?**
- [← 이전: 외계행성 탐지 소개](01_introduction.md)
- [용어 사전](09_glossary.md)에서 모르는 용어를 찾아보세요
